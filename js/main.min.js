const elements=document.querySelectorAll('.scroll-reveal');const observer=new IntersectionObserver((entries)=>{entries.forEach(entry=>{entry.target.classList.toggle('visible',entry.isIntersecting)})},{threshold:0.2});elements.forEach(el=>observer.observe(el));const header=document.getElementById("main-header");window.addEventListener("scroll",()=>{header?.classList.toggle("scrolled",window.scrollY>50)});const menuBtn=document.getElementById('menu-btn');const menu=document.getElementById('mobile-menu');menuBtn?.addEventListener('click',()=>{menu.classList.toggle('hidden')});const themeToggle=document.getElementById('theme-toggle');const html=document.documentElement;const savedTheme=localStorage.getItem('theme')||'light';if(savedTheme==='dark'){html.classList.add('dark');themeToggle.checked=true}themeToggle?.addEventListener('change',(e)=>{if(e.target.checked){html.classList.add('dark');localStorage.setItem('theme','dark')}else{html.classList.remove('dark');localStorage.setItem('theme','light')}});function generateMatrix(){const matrixContainer=document.getElementById('matrix-container');if(!matrixContainer)return;const japaneseChars=['ア','イ','ウ','エ','オ','カ','キ','ク','ケ','コ','サ','シ','ス','セ','ソ','タ','チ','ツ','テ','ト','ナ','ニ','ヌ','ネ','ノ','ハ','ヒ','フ','ヘ','ホ','マ','ミ','ム','メ','モ','ヤ','ユ','ヨ','ラ','リ','ル','レ','ロ','ワ','ヲ','ン','ガ','ギ','グ','ゲ','ゴ','ザ','ジ','ズ','ゼ','ゾ','ダ','ヂ','ヅ','デ','ド','バ','ビ','ブ','ベ','ボ','パ','ピ','プ','ペ','ポ'];const containerWidth=matrixContainer.offsetWidth||window.innerWidth;const containerHeight=matrixContainer.offsetHeight||window.innerHeight;const cellSize=window.innerWidth<768?30:40;const cols=Math.ceil(containerWidth/cellSize);const rows=Math.ceil(containerHeight/cellSize);const totalChars=cols*rows;for(let i=0;i<totalChars;i++){const span=document.createElement('span');const randomChar=japaneseChars[Math.floor(Math.random()*japaneseChars.length)];span.textContent=randomChar;matrixContainer.appendChild(span)}}document.addEventListener('DOMContentLoaded',generateMatrix);window.addEventListener('resize',()=>{const matrixContainer=document.getElementById('matrix-container');if(matrixContainer){matrixContainer.innerHTML='';generateMatrix()}});

